{"ast":null,"code":"var _jsxFileName = \"/Users/egorkazancev/Desktop/Front-Back/pr4/frontend/src/pages/BooksPage/BooksPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./BooksPage.scss\";\nimport BooksList from \"../../components/BooksList\";\nimport BookModal from \"../../components/BookModal\";\nimport { api } from \"../../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BooksPage() {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalMode, setModalMode] = useState(\"create\");\n  const [editingBook, setEditingBook] = useState(null);\n  useEffect(() => {\n    loadBooks();\n  }, []);\n  const loadBooks = async () => {\n    try {\n      setLoading(true);\n      const data = await api.getBooks();\n      setBooks(data);\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка загрузки книг\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const openCreate = () => {\n    setModalMode(\"create\");\n    setEditingBook(null);\n    setModalOpen(true);\n  };\n  const openEdit = book => {\n    setModalMode(\"edit\");\n    setEditingBook(book);\n    setModalOpen(true);\n  };\n  const closeModal = () => {\n    setModalOpen(false);\n    setEditingBook(null);\n  };\n  const handleDelete = async id => {\n    const ok = window.confirm(\"Удалить книгу?\");\n    if (!ok) return;\n    try {\n      await api.deleteBook(id);\n      setBooks(prev => prev.filter(b => b.id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка удаления книги\");\n    }\n  };\n  const handleSubmitModal = async payload => {\n    try {\n      if (modalMode === \"create\") {\n        const newBook = await api.createBook(payload);\n        setBooks(prev => [...prev, newBook]);\n      } else {\n        const updatedBook = await api.updateBook(payload.id, payload);\n        setBooks(prev => prev.map(b => b.id === payload.id ? updatedBook : b));\n      }\n      closeModal();\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка сохранения книги\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brand\",\n          children: \"Books App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__right\",\n          children: \"React\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"title\",\n            children: \"\\u041A\\u043D\\u0438\\u0433\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn--primary\",\n            onClick: openCreate,\n            children: \"+ \\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty\",\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(BooksList, {\n          books: books,\n          onEdit: openEdit,\n          onDelete: handleDelete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"footer__inner\",\n        children: [\"\\xA9 \", new Date().getFullYear(), \" Books App\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BookModal, {\n      open: modalOpen,\n      mode: modalMode,\n      initialBook: editingBook,\n      onClose: closeModal,\n      onSubmit: handleSubmitModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(BooksPage, \"Vr2m5kLY87d8zs0yV1S/I044PLE=\");\n_c = BooksPage;\nvar _c;\n$RefreshReg$(_c, \"BooksPage\");","map":{"version":3,"names":["React","useState","useEffect","BooksList","BookModal","api","jsxDEV","_jsxDEV","BooksPage","_s","books","setBooks","loading","setLoading","modalOpen","setModalOpen","modalMode","setModalMode","editingBook","setEditingBook","loadBooks","data","getBooks","err","console","error","alert","openCreate","openEdit","book","closeModal","handleDelete","id","ok","window","confirm","deleteBook","prev","filter","b","handleSubmitModal","payload","newBook","createBook","updatedBook","updateBook","map","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onEdit","onDelete","Date","getFullYear","open","mode","initialBook","onClose","onSubmit","_c","$RefreshReg$"],"sources":["/Users/egorkazancev/Desktop/Front-Back/pr4/frontend/src/pages/BooksPage/BooksPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./BooksPage.scss\";\n\nimport BooksList from \"../../components/BooksList\";\nimport BookModal from \"../../components/BookModal\";\nimport { api } from \"../../api\";\n\nexport default function BooksPage() {\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalMode, setModalMode] = useState(\"create\");\n  const [editingBook, setEditingBook] = useState(null);\n\n  useEffect(() => {\n    loadBooks();\n  }, []);\n\n  const loadBooks = async () => {\n    try {\n      setLoading(true);\n      const data = await api.getBooks();\n      setBooks(data);\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка загрузки книг\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openCreate = () => {\n    setModalMode(\"create\");\n    setEditingBook(null);\n    setModalOpen(true);\n  };\n\n  const openEdit = (book) => {\n    setModalMode(\"edit\");\n    setEditingBook(book);\n    setModalOpen(true);\n  };\n\n  const closeModal = () => {\n    setModalOpen(false);\n    setEditingBook(null);\n  };\n\n  const handleDelete = async (id) => {\n    const ok = window.confirm(\"Удалить книгу?\");\n    if (!ok) return;\n\n    try {\n      await api.deleteBook(id);\n      setBooks((prev) => prev.filter((b) => b.id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка удаления книги\");\n    }\n  };\n\n  const handleSubmitModal = async (payload) => {\n    try {\n      if (modalMode === \"create\") {\n        const newBook = await api.createBook(payload);\n        setBooks((prev) => [...prev, newBook]);\n      } else {\n        const updatedBook = await api.updateBook(payload.id, payload);\n        setBooks((prev) =>\n          prev.map((b) => (b.id === payload.id ? updatedBook : b))\n        );\n      }\n      closeModal();\n    } catch (err) {\n      console.error(err);\n      alert(\"Ошибка сохранения книги\");\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      <header className=\"header\">\n        <div className=\"header__inner\">\n          <div className=\"brand\">Books App</div>\n          <div className=\"header__right\">React</div>\n        </div>\n      </header>\n      \n      <main className=\"main\">\n        <div className=\"container\">\n          <div className=\"toolbar\">\n            <h1 className=\"title\">Книги</h1>\n            <button className=\"btn btn--primary\" onClick={openCreate}>\n              + Создать\n            </button>\n          </div>\n          \n          {loading ? (\n            <div className=\"empty\">Загрузка...</div>\n          ) : (\n            <BooksList\n              books={books}\n              onEdit={openEdit}\n              onDelete={handleDelete}\n            />\n          )}\n        </div>\n      </main>\n      \n      <footer className=\"footer\">\n        <div className=\"footer__inner\">\n          © {new Date().getFullYear()} Books App\n        </div>\n      </footer>\n      \n      <BookModal\n        open={modalOpen}\n        mode={modalMode}\n        initialBook={editingBook}\n        onClose={closeModal}\n        onSubmit={handleSubmitModal}\n      />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}